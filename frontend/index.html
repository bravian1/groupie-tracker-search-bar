<!DOCTYPE html>
<html>
  <head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Groupie-Tracker: Your Live Music Experience</title>
<link rel="icon" href="/static/groupie-tracker-favicon-color.png" type="image/x-icon">
<link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <header class="header">
    <div class="logo-container">
      <img src="/static/logo-no-background.png" alt="Groupie-Tracker Logo" class="logo-image" width="50" height="50">
      <div class="logo-text bounce">Groupie-Tracker</div>
    </div>
 
  </header>
  
  <main class="main">
    <div class="search-container"  >
      <form action="/artist" method="post">
      <input type="text" id="search-input" name="artist" placeholder="Search for bands, events, or venues...">
      <button id="search-button" type="submit" class="shake">Search</button>
      </form>
      <div id="suggestions-container">
        <!-- <ul id="list"></ul> -->
      </div>
    </div>
    
    <section class="featured-bands">
      {{range .}}
      <form action="/artist" method="post" class="band-card"
          data-members="{{.Members}}"
          data-creation-date="{{.CreationDate}}"
          data-first-album="{{.FirstAlbum}}"
          data-locations="{{.Locations}}">
          <button id="click" type="submit">
              <input type="hidden" name="artist" value="{{.Name}}">
              <img src="{{.Image}}" alt="{{.Name}} image" class="band-image" width="180" height="180">
              <h3>{{.Name}}</h3>
          </button>
      </form>
      {{end}}
  </section>
  </main>
  
  <footer class="footer">
    <p>&copy; 2024 Groupie-Tracker | Made with Go with ðŸ’–</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      const bandCards = document.querySelectorAll('.band-card');

      // Add hover effect to band cards
      bandCards.forEach(card => {
        card.addEventListener('mouseenter', () => {
          card.style.transform = 'scale(1.05) rotate(2deg)';
        });
        card.addEventListener('mouseleave', () => {
          card.style.transform = 'scale(1) rotate(0)';
        });
      });

      // Add click effect to search button
      const searchButton = document.getElementById('search-button');
      searchButton.addEventListener('mousedown', () => {
        searchButton.style.transform = 'translateY(-50%) scale(0.95)';
      });
      searchButton.addEventListener('mouseup', () => {
        searchButton.style.transform = 'translateY(-50%) scale(1)';
      });
    });

// Search functionality
const searchInput = document.querySelector('#search-input');
const suggestionsContainer = document.querySelector('#suggestions-container');

searchInput.addEventListener('keyup', (e) => {
    const searchValue = e.target.value.toLowerCase().trim();
    suggestionsContainer.innerHTML = ''; // Clear previous suggestions

    if (searchValue === '') {
        return; // Exit if search input is empty
    }

    const bandCards = document.querySelectorAll('.featured-bands .band-card');
    bandCards.forEach(card => {
        card.style.display = 'none'; // Hide all cards initially
        let isMatch = false;

        // Search by name
        const bandName = card.querySelector('h3').textContent.trim().toLowerCase();
        if (bandName.includes(searchValue)) {
            addSuggestion(bandName, 'band');
            isMatch = true;
        }

        // Search by members
        const membersStr = card.getAttribute('data-members');
        if (membersStr) {
            const members = membersStr.split(',').map(m => m.trim());
            const matchingMembers = members.filter(member => 
                member.toLowerCase().includes(searchValue)
            );
            if (matchingMembers.length > 0) {
                matchingMembers.forEach(member => {
                    addSuggestion(`${member} (${bandName})`, 'member');
                });
                isMatch = true;
            }
        }

        // Search by creation date
        const creationDate = card.getAttribute('data-creation-date');
        if (creationDate && creationDate.includes(searchValue)) {
            addSuggestion(`${bandName} - Created in ${creationDate}`, 'info');
            isMatch = true;
        }

        // Search by first album
        const firstAlbum = card.getAttribute('data-first-album');
        if (firstAlbum && firstAlbum.toLowerCase().includes(searchValue)) {
            addSuggestion(`${bandName} - First album: ${firstAlbum}`, 'info');
            isMatch = true;
        }

        // Search by locations
        const locationsStr = card.getAttribute('data-locations');
        if (locationsStr) {
            const locations = locationsStr.split(',').map(l => l.trim());
            const matchingLocations = locations.filter(location => 
                location.toLowerCase().includes(searchValue)
            );
            if (matchingLocations.length > 0) {
                matchingLocations.forEach(location => {
                    addSuggestion(`${bandName} - Location: ${location}`, 'location');
                });
                isMatch = true;
            }
        }

        if (isMatch) {
            card.style.display = 'block';
        }
    });
});

function addSuggestion(text, type) {
    const suggestionItem = document.createElement('div');
    suggestionItem.textContent = text;
    suggestionItem.classList.add(type);
    suggestionsContainer.appendChild(suggestionItem);
}
    // function post(url, value) {
    //   const form = document.createElement('form');
    //   form.method = 'POST';
    //   form.action = url;
      
    //   const input = document.createElement('input');
    //   input.type = 'hidden';
    //   input.name = 'artist';
    //   input.value = value;
      
    //   form.appendChild(input);
    //   document.body.appendChild(form);
    //   form.submit();
    // }

 
  </script>
</body>
</html>